<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SK Santisima Cruz IMS</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script defer src="{{ url_for('static', filename='script.js') }}"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    lucide.createIcons();
  });
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  

  <script>
    function confirmDelete(event, url) {
      event.preventDefault();
      if (confirm('Are you sure you want to delete this item?')) {
        window.location.href = url;
      }
    }
  </script>
</head>
<body class="{{ body_class if body_class is defined else ( 'homepage' if request.endpoint == 'index' else '' ) }}">

  {# Topbar & sidebar should be hidden on login-page. We use body class to toggle. #}
  {% if not (body_class is defined and body_class == 'login-page') %}
  <!-- TOPBAR -->
  <header class="topbar">
    <div class="logo">
      <img src="{{ url_for('static', filename='sk.png') }}" alt="SK Logo">
      <h1>SK Santisima Cruz</h1>
    </div>

    <div class="nav-right">
      {% if session.user %}
        <span class="user-name">{{ session.user.fullname }}</span>
        <button id="menu-toggle" class="menu-btn" aria-label="Open menu">☰</button>
        <a href="{{ url_for('logout') }}" class="logout-link">Logout</a>
      {% else %}
        <a href="{{ url_for('login') }}">Login</a>
      {% endif %}
    </div>
  </header>

  <!-- SIDEBAR -->
 <!-- SIDEBAR (hidden by default) -->
<!-- SIDEBAR (hidden by default) -->
<!-- SIDEBAR (hidden by default) -->
<div id="sidebar" class="sidebar" aria-hidden="true">
  <nav>
    {% if session.user %}
      <!-- ✅ DASHBOARD BUTTON -->
      {% if session.user.role == 'super_admin' %}
        <a href="{{ url_for('superadmin_dashboard') }}">
          <i data-lucide="home"></i> Dashboard
        </a>
      {% elif session.user.role == 'SK_Chairman' %}
        <a href="{{ url_for('sk_chairman_dashboard') }}">
          <i data-lucide="home"></i> Dashboard
        </a>
      {% elif session.user.role == 'Secretary' %}
        <a href="{{ url_for('secretary_dashboard') }}">
          <i data-lucide="home"></i> Dashboard
        </a>
      {% elif session.user.role == 'Treasurer' %}
        <a href="{{ url_for('treasurer_dashboard') }}">
          <i data-lucide="home"></i> Dashboard
        </a>
      {% elif session.user.role == 'BMO' %}
        <a href="{{ url_for('bmo_dashboard') }}">
          <i data-lucide="home"></i> Dashboard
        </a>
      {% endif %}

      <!-- ✅ Other Navigation Links with Icons -->
      <a href="{{ url_for('projects') }}">
        <i data-lucide="folder-kanban"></i> Projects
      </a>
      <a href="{{ url_for('logbook') }}">
        <i data-lucide="book-open"></i> Logbook
      </a>
      <a href="{{ url_for('reports') }}">
        <i data-lucide="file-text"></i> Reports
      </a>
      {% if session['user']['role'] == 'super_admin' %}
<li>
  <a href="{{ url_for('user_management') }}">
    <i class="fas fa-users"></i> User Management
  </a>
</li>
{% endif %}

    {% endif %}
  </nav>
</div>

  {% endif %}

  <!-- FLASH MESSAGES -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-container">
        {% for cat, msg in messages %}
          <div class="flash {{ cat }}">{{ msg }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- MAIN CONTENT -->
  <main id="main-content">
    {% block content %}{% endblock %}
  </main>

  <!-- FOOTER -->
  {% if not (body_class is defined and body_class == 'login-page') %}
  <footer class="footer">Made with ❤️ by SK Santisima Cruz | Santa Cruz, Laguna</footer>
  {% endif %}

</body>
</html>
